import {
    "github.com/myapp/forms"
}

// name: RegistrationForm
// param: form forms.Registration
// param: csrfToken string
el {
    // PicoCSS handles most styles, but we need some custom tweaks
    css {
        .form-card {
            max-width _600px
            margin _2rem auto
        }
        .validation-msg {
            font-size _0.875rem
            margin-top _0.25rem
            color "#d81b60" // Overriding Pico's default error color
        }
        // Custom shake animation for errors
        @keyframes shake {
            _0%, _100% { transform "translateX(0)" }
            _25% { transform "translateX(-5px)" }
            _75% { transform "translateX(5px)" }
        }
        .input-error {
            border-color "#d81b60"
            animation "shake 0.3s ease-in-out"
        }
    }

    // Main layout
    &layout.container {
        h1 "Create Account"
        
        article.form-card {
            form method=POST action="/register" {
                input type=hidden name=csrf_token value="`csrfToken`"

                // Username Field
                label for=username {
                    "Username"
                    input type=text name=username id=username placeholder="jdoe123" value="`form.Username`" aria-invalid="`form.HasError('username')`"
                    
                    if "`form.HasError('username')`" {
                        small.validation-msg "`form.GetError('username')`"
                    }
                }

                // Email Field
                label for=email {
                    "Email Address"
                    input type=email name=email id=email placeholder="john@example.com" value="`form.Email`" aria-invalid="`form.HasError('email')`"
                    
                    if "`form.HasError('email')`" {
                        small.validation-msg "`form.GetError('email')`"
                    }
                }

                // Password Grid
                .grid {
                    label for=password {
                        "Password"
                        input type=password name=password id=password aria-invalid="`form.HasError('password')`"
                    }
                    
                    label for=confirm {
                        "Confirm Password"
                        input type=password name=confirm id=confirm aria-invalid="`form.HasError('confirm')`"
                    }
                }
                
                if "`form.HasError('password')`" {
                    small.validation-msg "`form.GetError('password')`"
                }

                // Terms Checkbox
                label for=terms {
                    input type=checkbox name=terms id=terms role=switch checked="`form.TermsAccepted`"
                    "I agree to the Terms and Conditions"
                }

                // Submit Button
                button type=submit class=contrast "Register Now"
            }
        }
        
        footer.text-center {
            small {
                "Already have an account? "
                a href="/login" "Log in here"
            }
        }
    }
}
